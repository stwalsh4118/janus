# [0-2] Initialize Next.js frontend application

[Back to task list](./tasks.md)

## Description

Set up the Next.js 15 frontend application with TypeScript, Tailwind CSS, React 19, basic UI layout, and API client for backend communication. This establishes the frontend foundation for incremental development with voice features to be added later.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-11 00:00:00 | Created | N/A | Proposed | Task file created | Sean |

## Requirements

1. Initialize Next.js 15 application with TypeScript and Tailwind CSS
2. Set up app directory structure following Next.js 15 conventions
3. Create basic responsive UI layout optimized for mobile
4. Implement API client for backend communication
5. Create PushToTalk stub component (non-functional placeholder)
6. Display backend health status on page load
7. Configure development environment variables
8. Ensure mobile-responsive design with Tailwind

## Implementation Plan

### 1. Initialize Next.js Application
```bash
cd /home/sean/workspace/janus
mkdir frontend
cd frontend
pnpm create next-app@latest . --typescript --tailwind --app --no-src-dir
```

### 2. Install Additional Dependencies
```bash
pnpm add @types/node @types/react @types/react-dom
```

### 3. Create Directory Structure
```
frontend/
  app/
    layout.tsx           # Root layout with metadata
    page.tsx             # Home page
    globals.css          # Global styles with Tailwind
  components/
    PushToTalk.tsx       # Stub button component
    StatusIndicator.tsx  # Backend connection status
  lib/
    api-client.ts        # Backend API client
    types.ts             # TypeScript types
  public/
    (static assets)
  .env.local
  next.config.js
  tailwind.config.js
  tsconfig.json
  package.json
```

### 4. Implement Core Files

**app/layout.tsx**:
- Root layout with viewport meta for mobile
- Font configuration
- Global CSS import

**app/page.tsx**:
- Main page component
- Fetch backend health on mount
- Display connection status
- Render PushToTalk stub component
- Show placeholder UI for conversation

**components/StatusIndicator.tsx**:
- Display backend connection status
- Color-coded indicator (green=connected, red=disconnected)
- Show backend version if available

**components/PushToTalk.tsx**:
- Large circular button (200x200px)
- Stub functionality (no actual recording yet)
- Mobile-optimized touch target
- Visual states: idle, disabled

**lib/api-client.ts**:
```typescript
class CursorVoiceClient {
  constructor(baseUrl: string);
  async healthCheck(): Promise<HealthResponse>;
  async startSession(): Promise<string>;
  async ask(sessionId: string, question: string): Promise<string>;
  async heartbeat(sessionId: string): Promise<void>;
  async endSession(sessionId: string): Promise<void>;
}
```

**lib/types.ts**:
- Define TypeScript interfaces for API responses
- HealthResponse, SessionResponse, etc.

**.env.local**:
```
NEXT_PUBLIC_API_URL=http://localhost:3000
```

**next.config.js**:
- Configure for standalone output (preparation for deployment)

**tailwind.config.js**:
- Extend theme for mobile-first design
- Configure colors for status indicators

### 5. Configure Mobile Optimization
- Viewport meta tag to prevent zoom
- Large touch targets (min 44x44pt)
- High contrast colors
- Test responsive layout 320px-768px

## Test Plan

### Unit Tests
- Not required for this initial setup task (focus on integration)

### Integration Tests
Manual verification:
1. Next.js dev server starts successfully on port 3001
2. Page loads without errors in browser
3. Backend health check is called on page load
4. Connection status displays correctly
5. PushToTalk button renders with proper styling
6. Layout is responsive on mobile viewport
7. Tailwind CSS styles apply correctly
8. Hot reload works (modify component, verify auto-refresh)

### Success Criteria
- [ ] Next.js 15 initialized with TypeScript
- [ ] App starts on port 3001 without errors
- [ ] Tailwind CSS configured and working
- [ ] API client implemented with all methods
- [ ] Health check called successfully on load
- [ ] Backend status displayed on UI
- [ ] PushToTalk stub component renders
- [ ] Mobile-responsive layout (320px-768px)
- [ ] Hot reload functional
- [ ] No TypeScript compilation errors
- [ ] No console errors in browser

## Verification

Manual testing steps:
```bash
# 1. Start backend (in separate terminal)
cd /home/sean/workspace/janus
air

# 2. Start frontend
cd /home/sean/workspace/janus/frontend
pnpm dev

# 3. Open browser
# Navigate to http://localhost:3001

# 4. Verify UI elements
# - Connection status shows "Connected" (green)
# - PushToTalk button visible and styled
# - Layout responsive on mobile viewport

# 5. Open browser console
# - No errors present
# - Network tab shows successful health check request

# 6. Test hot reload
# - Modify page.tsx
# - Verify automatic refresh without manual reload

# 7. Test mobile viewport
# - Open DevTools, switch to mobile view (iPhone, Android)
# - Verify layout adapts properly
# - Verify touch targets are large enough
```

## Files Modified

### New Files
- `frontend/package.json`
- `frontend/pnpm-lock.yaml`
- `frontend/tsconfig.json`
- `frontend/next.config.js`
- `frontend/tailwind.config.js`
- `frontend/postcss.config.js`
- `frontend/.env.local`
- `frontend/.gitignore`
- `frontend/app/layout.tsx`
- `frontend/app/page.tsx`
- `frontend/app/globals.css`
- `frontend/components/PushToTalk.tsx`
- `frontend/components/StatusIndicator.tsx`
- `frontend/lib/api-client.ts`
- `frontend/lib/types.ts`

